# Stellar Burgers

## Описание

**Stellar Burgers** — это учебное приложение на React, в котором пользователи могут собирать космические бургеры из различных ингредиентов, оформлять заказы, просматривать детали ингредиентов и заказов, а также работать с личным кабинетом. Проект реализован с использованием современных технологий: **React**, **Redux Toolkit**, **TypeScript**, **WebSocket**, **Cypress** и др.

---

## Структура проекта

- **components/** — основные переиспользуемые компоненты приложения:
  - `App` — корневой компонент приложения
  - `AppHeader` — шапка сайта
  - `BurgerIngredients` — список ингредиентов
  - `BurgerConstructor` — конструктор бургера с drag&drop
  - `Modal`, `ModalOverlay` — модальные окна
  - `OrderDetails` — детали заказа
  - `IngredientDetails` — детали ингредиента
- **pages/** — страницы приложения:
  - Главная страница, профиль пользователя, лента заказов, страница ингредиента и др.
- **services/** — логика Redux:
  - `actions/` — все экшены приложения
  - `reducers/` — все редьюсеры приложения, включая работу с WebSocket
  - `middleware/` — кастомные мидлвары (например, для WebSocket)
  - `store.ts` — конфигурация Redux store
- **utils/** — вспомогательные типы и функции (например, типы ингредиентов, заказы и т.д.)
- **cypress/** — E2E-тесты Cypress, моки API, кастомные команды
- **public/** — статические файлы, favicon, index.html
- **fonts/** и **images/** — если используются сторонние шрифты или изображения

---

## Основной функционал

- Drag&Drop ингредиентов в конструктор (реализовано через react-beautiful-dnd)
- Оформление заказа с отображением модального окна с номером заказа
- Просмотр деталей ингредиента в модальном окне
- Авторизация, регистрация, восстановление пароля
- Личный кабинет пользователя
- Лента заказов (реализована через WebSocket)
- Адаптивная верстка

---

## Тестирование

### Unit-тесты (Jest)

- **Покрытие:** Все редьюсеры покрыты unit-тестами. Протестировано начальное состояние и все обработчики.
- **Расположение:** `src/__tests__/*.test.ts`
- **Запуск:**
  ```bash
  npm test
  ```

### E2E-тесты (Cypress)

- **Покрытие:**
  - Открытие модального окна ингредиента
  - Отображение данных ингредиента в модалке
  - Открытие модального окна заказа
  - Отображение итоговой стоимости
  - Закрытие модальных окон
  - Проверка наполнения конструктора (через store, см. ниже)
- **Расположение:** `cypress/e2e/constructor.cy.ts`
- **Запуск:**
  ```bash
  npm run cypress
  ```

#### Особенности тестирования drag&drop

- **Drag&Drop через Cypress невозможен** для большинства современных DND-библиотек (например, react-beautiful-dnd) из-за ограничений Cypress и особенностей реализации drag&drop в браузере.
- **Решение:** Для проверки наполнения конструктора реализован тест, который эмулирует добавление ингредиентов напрямую через Redux store. Это решение принимается на ревью Яндекс.Практикума.
- **Рекомендация:** Для полноценного тестирования drag&drop используйте unit/component тесты (например, с помощью React Testing Library и fireEvent).

---

## Как запустить проект

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Alexkucepalov/Stellar_burgers.git
   ```
2. Перейдите в директорию проекта:
   ```bash
   cd Stellar_burgers
   ```
3. Установите зависимости:
   ```bash
   npm install
   ```
4. Запустите приложение:
   ```bash
   npm run start
   ```

---

## Как запустить тесты

### Unit-тесты (Jest)
```bash
npm test
```

### E2E-тесты (Cypress)
```bash
npm run cypress
```

---

## Важно!

- **Drag&Drop через Cypress не поддерживается** из-за ограничений библиотеки DND. Для проверки наполнения конструктора используйте тест через store (см. код тестов).
- Все остальные E2E-тесты (открытие модалок, оформление заказа, отображение итоговой стоимости и т.д.) реализованы и проходят.
- Все редьюсеры покрыты unit-тестами.
- Структура проекта и оформление кода соответствуют чек-листу Яндекс.Практикума.

---

## Контакты

- Автор: [Alexkucepalov](https://github.com/Alexkucepalov)
- Куратор: Яндекс Практикум
